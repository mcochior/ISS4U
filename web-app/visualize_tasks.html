<html>
<head>
    <script>
        function buildTable(data){
            let table = document.getElementById('content');

            for (var i = 0; i < data.length; i++){
                var row =  `<tr>
                                <td>${data[i].nome}</td>
                                <td>${data[i].modulo_di_riferimento}</td>
                                <td>${data[i].descrizione}</td>
                                <td>${data[i].data_inizio}</td>
                                <td>${data[i].data_fine}</td>
                                <td>${data[i].completamento}</td>
                            </tr>`;
                table.innerHTML += row;
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            fetch('http://localhost:1001/tasks', {
                credentials: 'include'
            })
            .then(res => res.json())
            .then(data => {
                console.log(data);
                buildTable(data);
            });
            
        });

    </script>
</head>
<body>
    <a href="index.html">Index</a>
    <a href="login.html">Login</a>
    <a href="register.html">Register a user</a>
    <a href="iss.html">ISS</a>
    <a href="logged_in_page.html">Logged in Page</a>
    <a href="page_goer.html">Page Goer</a>
    <a href="add_task.html">Add Task</a>
    <a href="visualize_tasks.html">Visualize Tasks</a>
    <a href="delete_task.html">Delete Task</a>
    <a href="modify_task.html">Modify Task</a>
    <table class = "table table-striped">
        <tr class = "bg-info">
            <th>Nome</th>
            <th>MdR</th>
            <th>Descrizione</th>
            <th>Data Inizio</th>
            <th>Data Fine</th>
            <th>Completamento</th>
        </tr>

        <tbody id="content">

        </tbody>
    </table>
    
</body>
</html>