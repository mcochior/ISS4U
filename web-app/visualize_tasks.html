<html>
<head>
    <script type="text/javascript" src="ts/kick_out_unauth.js"></script>

    <script>
        function buildTable(data){
            let table = document.getElementById('content');

            for (var i = 0; i < data.length; i++){
                var row =  `<tr>
                                <td>${data[i]._id}</td>
                                <td>${data[i].nome}</td>
                                <td>${data[i].modulo_di_riferimento}</td>
                                <td>${data[i].descrizione}</td>
                                <td>${data[i].data_inizio}</td>
                                <td>${data[i].data_fine}</td>
                                <td>${data[i].completamento}</td>
                                <td>${data[i].user_id}</td>
                            </tr>`;
                table.innerHTML += row;
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            fetch('http://localhost:1001/tasks', {
                credentials: 'include'
            })
            .then(res => res.json())
            .then(data => {
                console.log(data);
                buildTable(data);
            });
            
        });

    </script>
</head>
<body>
    <a href="logged_in_page.html">Logged in Page</a>
    <table border ="1" class = "table table-striped" >
        <tr class = "bg-info">
            <th>Task ID</th>
            <th>Nome</th>
            <th>MdR</th>
            <th>Descrizione</th>
            <th>Data Inizio</th>
            <th>Data Fine</th>
            <th>Completamento</th>
            <th>User Id</th>
        </tr>

        <tbody id="content">

        </tbody>
    </table>
    
</body>
</html>