<!-- index.html -->

<!DOCTYPE html>
<html lang="en">
<head>
    <script>
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
        }

        document.addEventListener('DOMContentLoaded', () => {
            const sessionToken = getCookie('some-auth');
            console.log(sessionToken);
            const data = {
                sessionToken: sessionToken
            };

            const headers = {'Content-Type':'application/json'
                // 'Access-Control-Allow-Origin':'*',
                // 'Access-Control-Allow-Methods':'POST,PATCH,OPTIONS'
            }

            fetch('http://localhost:1001/users', {
                // mode: 'no-cors',
                method: "POST",
                headers: headers,
                credentials: 'include',
                body: JSON.stringify(data),
            })
            .then(res => res.json())
            .then(data => {
                console.log(data);
                // window.location.href = "logged_in_page.html";
            })
            .catch(error => {
                console.error('Error: ', error);
            });
        });
    </script>
</head>
<body>
    <h1>Login</h1>
    <h2>Links: </h2>
    <a href="index.html">Index</a>
    <a href="login.html">Login</a>
    <a href="register.html">Register a user</a>
    <a href="iss.html">ISS</a>
    <a href="logged_in_page.html">Logged in Page</a>
    <a href="page_goer.html">Page Goer</a>
    <a href="add_task.html">Add Task</a>
    <a href="visualize_tasks.html">Visualize Tasks</a>
    <a href="delete_task.html">Delete Task</a>
    <a href="modify_task.html">Modify Task</a>
    
    <h2>Normal content: </h2>
    <form>
        <table> 
            <tr>
                <td>
                    <button type = "submit">Submit</button>
                </td>
            </tr>
        </table>
    </form>
</body>
</html>

